<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/css/styles.css" />
    <title>Universe</title>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <i class="fas fa-hotel"></i>
          <span>Grand Hotel</span>
          {% if user.is_authenticated %}
          <p>Welcome, {{ user.username }}!</p>
          {% endif %}
        </div>
        <ul class="nav-menu">
          {% if user.is_authenticated %}
          <li>
            {% if user.role == 'worker' %}
            <a href="{% url 'accounts_worker_dashboard' %}" class="nav-link">
              User
            </a>
            {% elif user.role == 'customer' %}
            <a href="{% url 'accounts_customer_dashboard' %}" class="nav-link">
              User
            </a>
            {% elif user.role == 'admin' %}
            <a href="{% url 'admin:index' %}" class="nav-link">Admin</a>
            {% else %}
            <a href="#" class="nav-link">Dashboard</a>
            {% endif %}
          </li>
          {% endif %}
          <li><a href="{% url 'home' %}" class="nav-link">Home</a></li>
          <li><a href="{% url 'about_us' %}" class="nav-link">About Us</a></li>
          <li><a href="{% url 'menu' %}" class="nav-link">Menu</a></li>
          <li><a href="{% url 'bookroom' %}" class="nav-link">Book Room</a></li>
          {% if user.is_authenticated %}
          <li>
            <form method="post" action="{% url 'logout' %}">
              {% csrf_token %}
              <button class="login-btn" type="submit">Logout</button>
            </form>
          </li>
          {% else %}
          <li>
            <button class="login-btn" onclick="showAuthModal()">Login</button>
          </li>
          {% endif %}
        </ul>
        <div class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>

    <!-- Authentication Modal -->
    <div id="authModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeAuthModal()">&times;</span>
        <div class="auth-container">
          <div class="auth-tabs">
            <button class="tab-btn active" onclick="showLogin()">Login</button>
            <button class="tab-btn" onclick="showSignup()">Sign Up</button>
          </div>
          <!-- Login Form -->
          <div id="loginForm" class="auth-form active">
            <h2>Welcome Back</h2>
            <input
              type="hidden"
              id="showLoginFlag"
              value="{% if show_login %}true{% else %}false{% endif %}"
            />
            {% if login_error %}
            <div class="error-message">{{ login_error }}</div>
            {% endif %}
            <form method="POST" action="{% url 'login' %}">
              {% csrf_token %}
              <div class="form-group">
                <label>Email</label>
                <input type="email" name="username" required />
              </div>
              <div class="form-group">
                <label>Password</label>
                <input type="password" name="password" required />
              </div>
              <button type="submit" class="auth-btn">Login</button>
            </form>
          </div>

          <!-- Signup Form -->
          <div id="signupForm" class="auth-form">
            <h2>Create Account</h2>
            <form method="POST" action="{% url 'signup' %}">
              {% csrf_token %}
              <div class="form-group">
                <label>Full Name</label>
                <input type="text" name="full_name" required />
              </div>
              <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" required />
              </div>
              <div class="form-group">
                <label>Password</label>
                <input type="password" name="password" required />
              </div>
              <div class="form-group">
                <label>Role</label>
                <select name="role" required>
                  <option value="customer">Customer</option>
                  <option value="worker">Worker</option>
                  <option value="admin">Admin</option>
                </select>
              </div>
              {% if signup_error %}
              <div class="error-message">{{ signup_error }}</div>
              {% endif %}
              <button type="submit" class="auth-btn">Sign Up</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
